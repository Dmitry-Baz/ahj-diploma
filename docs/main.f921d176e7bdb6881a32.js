/*! For license information please see main.f921d176e7bdb6881a32.js.LICENSE.txt */
(()=>{"use strict";var t={56(t,n,e){t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},72(t){var n=[];function e(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].identifier===t){e=r;break}return e}function r(t,r){for(var a={},i=[],c=0;c<t.length;c++){var u=t[c],s=r.base?u[0]+r.base:u[0],l=a[s]||0,f="".concat(s," ").concat(l);a[s]=l+1;var p=e(f),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)n[p].references++,n[p].updater(d);else{var m=o(d,r);r.byIndex=c,n.splice(c,0,{identifier:f,updater:m,references:1})}i.push(f)}return i}function o(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,o){var a=r(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var c=e(a[i]);n[c].references--}for(var u=r(t,o),s=0;s<a.length;s++){var l=e(a[s]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}a=u}}},113(t){t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},249(t,n,e){e.d(n,{A:()=>c});var r=e(601),o=e.n(r),a=e(314),i=e.n(a)()(o());i.push([t.id,"body {\n  font-family: sans-serif;\n  margin: 0;\n  padding: 20px;\n}\n\n.file-upload {\n  margin-bottom: 10px;\n}\n\n.file-upload.drag-over {\n  border: 2px dashed #007bff;\n  padding: 20px;\n  border-radius: 4px;\n}\n\n.message {\n  padding: 8px 0;\n  border-bottom: 1px solid #eee;\n}\n\n.download-btn {\n  margin-left: 10px;\n  font-size: 0.9em;\n  cursor: pointer;\n}\n\n/* #chat {\n  display: flex;\n  flex-direction: column-reverse;\n  overflow-y: auto;\n  height: 500px;\n} */",""]);const c=i},314(t){t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var e="",r=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),r&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),r&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e}).join("")},n.i=function(t,e,r,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var u=this[c][0];null!=u&&(i[u]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},540(t){t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},601(t){t.exports=function(t){return t[1]}},659(t){var n={};t.exports=function(t,e){var r=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},825(t){t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return t[r](a,a.exports,e),a.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;var r=e(72),o=e.n(r),a=e(825),i=e.n(a),c=e(659),u=e.n(c),s=e(56),l=e.n(s),f=e(540),p=e.n(f),d=e(113),m=e.n(d),y=e(249),v={};function b(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function a(e,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return h(s,"_invoke",function(e,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(n,e){return a=n,c=0,u=t,p.n=e,i}};function d(e,r){for(c=e,u=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,a=l[n],d=p.p,m=a[2];e>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=e<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=e<3||a[0]>r||r>m)&&(a[4]=e,a[5]=r,p.n=m,c=0))}if(o||e>1)return i;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),c=l,u=m;(n=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((n=(f=p.n<0)?u:e.call(r,p))!==i)break}catch(n){a=t,c=1,u=n}finally{s=1}}return{value:n,done:f}}}(e,o,a),!0),s}var i={};function c(){}function u(){}function s(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(h(n={},r,function(){return this}),n),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,h(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,h(f,"constructor",s),h(s,"constructor",u),u.displayName="GeneratorFunction",h(s,o,"GeneratorFunction"),h(f),h(f,o,"Generator"),h(f,r,function(){return this}),h(f,"toString",function(){return"[object Generator]"}),(b=function(){return{w:a,m:p}})()}function h(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}h=function(t,n,e,r){function a(n,e){h(t,n,function(t){return this._invoke(n,e,t)})}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(a("next",0),a("throw",1),a("return",2))},h(t,n,e,r)}function g(t,n,e,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?n(u):Promise.resolve(u).then(r,o)}function w(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var a=t.apply(n,e);function i(t){g(a,r,o,i,c,"next",t)}function c(t){g(a,r,o,i,c,"throw",t)}i(void 0)})}}v.styleTagTransform=m(),v.setAttributes=l(),v.insert=u().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),o()(y.A,v),y.A&&y.A.locals&&y.A.locals;var x="https://ahj-diploma-server-zbn4.onrender.com";function S(t){return E.apply(this,arguments)}function E(){return(E=w(b().m(function t(n){var e;return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(x,"/api/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n})});case 1:if((e=t.v).ok){t.n=2;break}throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ");case 2:return t.a(2,e.json())}},t)}))).apply(this,arguments)}function O(t){return k.apply(this,arguments)}function k(){return(k=w(b().m(function t(n){var e,r,o;return b().w(function(t){for(;;)switch(t.n){case 0:return(e=new FormData).append("file",n),t.n=1,fetch("".concat(x,"/api/files"),{method:"POST",body:e});case 1:if((r=t.v).ok){t.n=2;break}throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª");case 2:return t.n=3,r.json();case 3:return(o=t.v).url&&o.url.startsWith("/uploads/")&&(o.url="".concat(x).concat(o.url)),t.a(2,o)}},t)}))).apply(this,arguments)}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function T(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return C(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?C(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function L(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function a(e,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return P(s,"_invoke",function(e,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(n,e){return a=n,c=0,u=t,p.n=e,i}};function d(e,r){for(c=e,u=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,a=l[n],d=p.p,m=a[2];e>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=e<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=e<3||a[0]>r||r>m)&&(a[4]=e,a[5]=r,p.n=m,c=0))}if(o||e>1)return i;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),c=l,u=m;(n=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((n=(f=p.n<0)?u:e.call(r,p))!==i)break}catch(n){a=t,c=1,u=n}finally{s=1}}return{value:n,done:f}}}(e,o,a),!0),s}var i={};function c(){}function u(){}function s(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(P(n={},r,function(){return this}),n),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,P(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,P(f,"constructor",s),P(s,"constructor",u),u.displayName="GeneratorFunction",P(s,o,"GeneratorFunction"),P(f),P(f,o,"Generator"),P(f,r,function(){return this}),P(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:a,m:p}})()}function P(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}P=function(t,n,e,r){function a(n,e){P(t,n,function(t){return this._invoke(n,e,t)})}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(a("next",0),a("throw",1),a("return",2))},P(t,n,e,r)}function I(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function M(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?I(Object(e),!0).forEach(function(n){A(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function A(t,n,e){return(n=function(t){var n=function(t){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=j(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function N(t,n,e,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?n(u):Promise.resolve(u).then(r,o)}function B(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var a=t.apply(n,e);function i(t){N(a,r,o,i,c,"next",t)}function c(t){N(a,r,o,i,c,"throw",t)}i(void 0)})}}var H=document.getElementById("app"),_=[],D=1/0,G=!1,F=!0,z="all",R=document.createElement("style");function W(){return J.apply(this,arguments)}function J(){return(J=B(L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:if("Notification"in window){t.n=1;break}return console.warn("–ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"),t.a(2);case 1:if("granted"!==Notification.permission){t.n=2;break}return t.a(2);case 2:if("denied"===Notification.permission){t.n=3;break}return t.n=3,Notification.requestPermission();case 3:return t.a(2)}},t)}))).apply(this,arguments)}function U(t,n){"Notification"in window&&"granted"===Notification.permission&&new Notification(t,{body:n,icon:"/favicon.ico"})}function q(){try{return new Set(JSON.parse(localStorage.getItem("favorites")||"[]"))}catch(t){return new Set}}function $(){try{return JSON.parse(localStorage.getItem("pinnedMessage"))}catch(t){return null}}function K(t){var n,e=document.createElement("div");e.className="message message--".concat(t.type),e.style.padding="10px 0",e.style.borderBottom="1px solid #eee",e.style.display="flex",e.style.alignItems="flex-start";var r,o=document.createElement("button");o.textContent=(r=t.id,q().has(r)?"‚≠ê":"‚òÜ"),o.style.background="none",o.style.border="none",o.style.cursor="pointer",o.style.marginRight="8px",o.onclick=function(){return function(t){var n=q();n.has(t.id)?n.delete(t.id):n.add(t.id),localStorage.setItem("favorites",JSON.stringify(Array.from(n))),Q(_)}(t)},e.appendChild(o);var a=(null===(n=$())||void 0===n?void 0:n.id)===t.id,i=document.createElement("button");i.textContent="üìå",i.title=a?"–û—Ç–∫—Ä–µ–ø–∏—Ç—å":"–ó–∞–∫—Ä–µ–ø–∏—Ç—å",i.style.background="none",i.style.border="none",i.style.cursor="pointer",i.style.marginRight="8px",i.style.color=a?"#007bff":"#ccc",i.onclick=function(){return function(t){var n=$();n&&n.id===t.id?localStorage.removeItem("pinnedMessage"):function(t){localStorage.setItem("pinnedMessage",JSON.stringify(t))}(t),Q(_)}(t)},e.appendChild(i);var c=document.createElement("div");return c.style.flex="1","link"===t.type?c.innerHTML='<a href="'.concat(t.content,'" target="_blank" rel="noopener">').concat(t.content,"</a>"):"image"===t.type?c.innerHTML='\n      <img src="'.concat(t.content,'" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" style="max-width: 300px; max-height: 300px; display: block;" />\n      <button class="download-btn" data-url="').concat(t.content,'" data-filename="').concat(t.filename||"image.jpg",'" style="margin-top: 5px;">‚Üì –°–∫–∞—á–∞—Ç—å</button>\n    '):"video"===t.type?c.innerHTML='\n      <video controls src="'.concat(t.content,'" style="width: 300px;"></video>\n      <button class="download-btn" data-url="').concat(t.content,'" data-filename="').concat(t.filename||"video.mp4",'" style="margin-top: 5px;">‚Üì –°–∫–∞—á–∞—Ç—å</button>\n    '):"audio"===t.type?c.innerHTML='\n      <audio controls src="'.concat(t.content,'"></audio>\n      <button class="download-btn" data-url="').concat(t.content,'" data-filename="').concat(t.filename||"audio.mp3",'" style="margin-top: 5px;">‚Üì –°–∫–∞—á–∞—Ç—å</button>\n    '):"file"===t.type?c.innerHTML="\n      üìÑ ".concat(t.filename||"–§–∞–π–ª",'\n      <button class="download-btn" data-url="').concat(t.content,'" data-filename="').concat(t.filename||"file",'" style="margin-left: 10px;">‚Üì –°–∫–∞—á–∞—Ç—å</button>\n    '):c.textContent=t.content,e.appendChild(c),e}function Q(t){var n=document.getElementById("chat"),e=document.getElementById("pinned-container");if(n&&e){var r=$();if(r){var o=!0;"all"!==z&&r.type!==z&&(o=!1);var a=document.getElementById("search-input"),i=(null==a?void 0:a.value.trim().toLowerCase())||"";if(i&&!(r.content&&r.content.toLowerCase().includes(i)||r.filename&&r.filename.toLowerCase().includes(i))&&(o=!1),o){e.style.display="block",e.innerHTML="";var c=K(r),u=document.createElement("div");u.textContent="üìå –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ",u.style.fontSize="0.9em",u.style.color="#007bff",u.style.marginBottom="4px",c.insertBefore(u,c.firstChild),c.style.backgroundColor="#f0f8ff",c.style.padding="12px",e.appendChild(c)}else e.style.display="none"}else e.style.display="none";var s=t;"all"!==z&&(s=t.filter(function(t){return t.type===z}));var l=document.getElementById("search-input"),f=(null==l?void 0:l.value.trim().toLowerCase())||"";f&&(s=s.filter(function(t){return!(!t.content||!t.content.toLowerCase().includes(f))||!(!t.filename||!t.filename.toLowerCase().includes(f))}));var p=s.filter(function(t){return!r||t.id!==r.id});n.innerHTML="",0!==p.length||r?(p.forEach(function(t){n.appendChild(K(t))}),n.scrollTop=n.scrollHeight):n.innerHTML="<p>–°–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç</p>"}}function V(){return(V=B(L().m(function t(){var n,e,r,o,a,i;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!G){t.n=1;break}return t.a(2);case 1:return G=!0,t.p=2,document.getElementById("chat")||(H.innerHTML='\n        <h1>–ë–æ—Ç-–æ—Ä–≥–∞–Ω–∞–π–∑–µ—Ä</h1>\n        <div id="pinned-container" style="margin-bottom: 10px; display: none;"></div>\n        <div style="margin-bottom: 10px;">\n          <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º..." \n                 style="width: 100%; padding: 8px; box-sizing: border-box;" />\n        </div>\n        <div style="margin-bottom: 10px; display: flex; gap: 8px; flex-wrap: wrap;">\n          <button class="filter-btn active" data-type="all">–í—Å–µ</button>\n          <button class="filter-btn" data-type="image">üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>\n          <button class="filter-btn" data-type="video">üé• –í–∏–¥–µ–æ</button>\n          <button class="filter-btn" data-type="audio">üéµ –ê—É–¥–∏–æ</button>\n          <button class="filter-btn" data-type="file">üìÇ –§–∞–π–ª—ã</button>\n        </div>\n        <div id="chat" style="height: 320px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;"></div>\n        <div id="input-area" style="margin-top: 20px;">\n          <div id="file-upload" style="margin-bottom: 10px;">\n            <button id="upload-btn">üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>\n            <div id="drop-zone" style="border: 2px dashed #ccc; padding: 10px; margin-top: 5px; text-align: center;">\n              –ò–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞\n            </div>\n          </div>\n          <form id="message-form">\n            <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="width: 70%; padding: 8px;" />\n            <button type="submit" style="padding: 8px 16px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>\n          </form>\n        </div>\n      '),n=new URLSearchParams,D!==1/0&&n.append("before",D),n.append("limit","10"),e="".concat(x,"/api/messages?").concat(n.toString()),t.n=3,fetch(e);case 3:if((r=t.v).ok){t.n=4;break}throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏");case 4:return t.n=5,r.json();case 5:(o=t.v).reverse(),o=o.map(function(t){return t.content&&t.content.startsWith("/uploads/")?M(M({},t),{},{content:"".concat(x).concat(t.content)}):t}),(a=document.getElementById("chat"))&&(0===o.length?(a.innerHTML="<p>–°–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç</p>",F=!1):(_=T(o),Q(o),D=o[0].timestamp,F=o.length>=10)),t.n=7;break;case 6:t.p=6,i=t.v,console.error(i),document.getElementById("chat")||(H.innerHTML='<p style="color:red">–û—à–∏–±–∫–∞: '.concat(i.message,"</p>"));case 7:return t.p=7,G=!1,t.f(7);case 8:return t.a(2)}},t,null,[[2,6,7,8]])}))).apply(this,arguments)}function X(){return(X=B(L().m(function t(){var n,e,r,o,a;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!G){t.n=1;break}return t.a(2);case 1:return G=!0,t.p=2,(n=new URLSearchParams).append("before",D),n.append("limit","10"),e="".concat(x,"/api/messages?").concat(n.toString()),t.n=3,fetch(e);case 3:if((r=t.v).ok){t.n=4;break}throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏");case 4:return t.n=5,r.json();case 5:(o=t.v).reverse(),o=o.map(function(t){return t.content&&t.content.startsWith("/uploads/")?M(M({},t),{},{content:"".concat(x).concat(t.content)}):t}),document.getElementById("chat")&&o.length>0?(Q(_=[].concat(T(o),T(_))),D=o[o.length-1].timestamp,F=o.length>=10):F=!1,t.n=7;break;case 6:t.p=6,a=t.v,console.error("‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–≥—Ä—É–∑–∫–∏:",a);case 7:return t.p=7,G=!1,t.f(7);case 8:return t.a(2)}},t,null,[[2,6,7,8]])}))).apply(this,arguments)}R.textContent="\n  .filter-btn {\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    background: #f8f9fa;\n    cursor: pointer;\n    border-radius: 4px;\n    font-size: 14px;\n  }\n  .filter-btn.active {\n    background: #007bff;\n    color: white;\n    border-color: #007bff;\n  }\n",document.head.appendChild(R),function(){return V.apply(this,arguments)}().then(function(){!function(){document.querySelectorAll(".download-btn").forEach(function(t){t.addEventListener("click",function(t){var n=t.target.dataset.url;window.open(n,"_blank")})});var t=document.getElementById("message-form");t&&(t.onsubmit=function(){var t=B(L().m(function t(n){var e,r,o;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),e=document.getElementById("message-input"),!(r=e.value.trim())){t.n=4;break}return t.p=1,t.n=2,S(r);case 2:o={id:Date.now().toString(),type:r.startsWith("http://")||r.startsWith("https://")?"link":"text",content:r,timestamp:Date.now(),filename:null},_.push(o),Q(_),e.value="",r.toLowerCase().startsWith("@chaos:")&&(W(),setTimeout(B(L().m(function t(){var n,e,r,a,i;return L().w(function(t){for(;;)switch(t.n){case 0:return(n=new URLSearchParams).append("limit","20"),e="".concat(x,"/api/messages?").concat(n.toString()),t.n=1,fetch(e);case 1:if(!(r=t.v).ok){t.n=3;break}return t.n=2,r.json();case 2:(a=t.v).reverse(),a=a.map(function(t){return t.content&&t.content.startsWith("/uploads/")?M(M({},t),{},{content:"".concat(x).concat(t.content)}):t}),Q(_=a),(i=_.filter(function(t){return t.timestamp>o.timestamp})).length>0&&U("–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª",i[i.length-1].content);case 3:return t.a(2)}},t)})),500)),t.n=4;break;case 3:t.p=3,t.v,alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(n){return t.apply(this,arguments)}}());var n=document.getElementById("upload-btn");n&&(n.onclick=function(){var t=document.createElement("input");t.type="file",t.onchange=function(){var t=B(L().m(function t(n){var e,r,o;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(e=n.target.files[0])){t.n=4;break}return t.p=1,t.n=2,O(e);case 2:r=t.v,o={id:Date.now().toString(),type:r.type,content:r.url,timestamp:Date.now(),filename:r.filename},_.push(o),Q(_),t.n=4;break;case 3:t.p=3,t.v,alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(n){return t.apply(this,arguments)}}(),t.click()});var e=document.getElementById("drop-zone");e&&(e.addEventListener("dragover",function(t){t.preventDefault(),e.style.borderColor="#007bff"}),e.addEventListener("dragleave",function(){e.style.borderColor="#ccc"}),e.addEventListener("drop",function(){var t=B(L().m(function t(n){var r,o,a;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),e.style.borderColor="#ccc",!(r=n.dataTransfer.files[0])){t.n=4;break}return t.p=1,t.n=2,O(r);case 2:o=t.v,a={id:Date.now().toString(),type:o.type,content:o.url,timestamp:Date.now(),filename:o.filename},_.push(a),Q(_),t.n=4;break;case 3:t.p=3,t.v,alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(n){return t.apply(this,arguments)}}()));var r=document.getElementById("chat");r&&r.addEventListener("scroll",function(){r.scrollHeight>r.clientHeight&&r.scrollTop<=10&&F&&!G&&function(){X.apply(this,arguments)}()});var o=document.getElementById("search-input");o&&o.addEventListener("input",function(){Q(_)}),document.querySelectorAll(".filter-btn").forEach(function(t){t.addEventListener("click",function(){document.querySelectorAll(".filter-btn").forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),z=t.dataset.type,Q(_)})})}()})})();